{
  "version": 3,
  "sources": ["../../../src/lib/parsers/parser-6831-QuickSessionHist.ts"],
  "sourcesContent": ["import type * as utils from \"@iobroker/adapter-core\";\nimport { Parser } from \"binary-parser\";\nimport { ParserCommon } from \"./parser-common\";\nimport type { ParserInterface } from \"./parserinterface\";\n\ninterface Message_6831_QuickSessionHist {\n    QuickSessionHistId: number;\n    QuickSessionHistTime: number;\n    QuickSessionHistSystemOpState: number;\n    QuickSessionHistControlLogic: number;\n    QuickSessionHistMinCellVolt: number;\n    QuickSessionHistMaxCellVolt: number;\n    QuickSessionHistAvgCellVolt: number;\n    QuickSessionHistAvgCellTemp: number;\n    QuickSessionHistSocHiRes: number;\n    QuickSessionHistShuntVolt: number;\n    QuickSessionHistShuntAmp: number;\n    QuickSessionHistNumOfCellsInBypass: number;\n}\n\nexport class Parser_6831_QuickSessionHist extends ParserCommon implements ParserInterface {\n    private parser: Parser;\n\n    public constructor(adapter: utils.AdapterInstance) {\n        super(adapter);\n        // Category    = Session history\n        // Object      = Quick\n        // MsgLength   = 32\n        // Description = Quick session history\n        // Version     = 1\n        // Frequency   = adhoc\n        // Support     = Current\n        // Created     = SW 1.0.29\n        this.adapter = adapter;\n        this.messageId = \"6831\";\n        this.messageName = \"Quick session history\";\n        this.parser = new Parser()\n            .skip(8)\n            .int16le(\"QuickSessionHistId\")\n            .uint32le(\"QuickSessionHistTime\") // Epoch  *** log key ***\n            .uint8(\"QuickSessionHistSystemOpState\") /* Choices\n                    Simulator = 0,   \t  // LED = rainbow pulse\n                    Idle = 1,        \t  // LED = green slow pulse\n                    Discharging = 2, \t  // LED = green solid\n                    SoC Empty = 3,   \t  // LED = green double blink\n                    Charging = 4,    \t  // LED = blue slow pulse\n                    Full = 5,        \t  // LED = blue double blink\n                    Timeout = 6,     \t  // LED = red solid\n                    Critical Pending = 7, // LED = red fast pulse\n                    Critical Offline = 8, // LED = red slow pulse\n                    Mqtt Offline = 9,     // LED = white blink\n                    Auth Setup = 10,      // LED = white solid\n                    Shunt Timeout = 11,   // LED = red solid  \t*/\n            .uint8(\"QuickSessionHistControlLogic\")\n            .int16le(\"QuickSessionHistMinCellVolt\", {\n                formatter: x => {\n                    return x / 1000;\n                },\n            })\n            .int16le(\"QuickSessionHistMaxCellVolt\", {\n                formatter: x => {\n                    return x / 1000;\n                },\n            })\n            .int16le(\"QuickSessionHistAvgCellVolt\", {\n                formatter: x => {\n                    return x / 1000;\n                },\n            })\n            .uint8(\"QuickSessionHistAvgCellTemp\", {\n                formatter: x => {\n                    return x - 40;\n                },\n            }) // temperature \u00BAC\n            .int16le(\"QuickSessionHistSocHiRes\", {\n                formatter: x => {\n                    return x / 100;\n                },\n            }) // percent\n            .int16le(\"QuickSessionHistShuntVolt\", {\n                formatter: x => {\n                    return x / 100;\n                },\n            })\n            .floatle(\"QuickSessionHistShuntAmp\", {\n                formatter: x => {\n                    return x / 1000;\n                },\n            }) // amp\n            .uint8(\"QuickSessionHistNumOfCellsInBypass\");\n    }\n\n    public async initObjects(systemId: number): Promise<void> {\n        await Promise.all([\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistId\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistId\",\n                    type: \"number\",\n                    role: \"value\",\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistTime\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistTime\",\n                    type: \"number\",\n                    role: \"date\",\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistSystemOpState\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistSystemOpState\",\n                    type: \"number\",\n                    role: \"info.status\",\n                    read: true,\n                    write: false,\n                    states: {\n                        0: \"Simulator\",\n                        1: \"Idle\",\n                        2: \"Discharging\",\n                        3: \"SoC Empty\",\n                        4: \"Charging\",\n                        5: \"Full\",\n                        6: \"Timeout\",\n                        7: \"Critical Pending\",\n                        8: \"Critical Offline\",\n                        9: \"Mqtt Offline\",\n                        10: \"Auth Setup\",\n                        11: \"Shunt Timeout\",\n                    },\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistControlLogic\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistControlLogic\",\n                    type: \"number\",\n                    role: \"value\",\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistMinCellVolt\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistMinCellVolt\",\n                    type: \"number\",\n                    role: \"value.voltage\",\n                    read: true,\n                    write: false,\n                    unit: \"V\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistMaxCellVolt\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistMaxCellVolt\",\n                    type: \"number\",\n                    role: \"value.voltage\",\n                    read: true,\n                    write: false,\n                    unit: \"V\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistAvgCellVolt\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistAvgCellVolt\",\n                    type: \"number\",\n                    role: \"value.voltage\",\n                    read: true,\n                    write: false,\n                    unit: \"V\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistAvgCellTemp\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistAvgCellTemp\",\n                    type: \"number\",\n                    role: \"value.temperature\",\n                    read: true,\n                    write: false,\n                    unit: \"\u00B0C\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistSocHiRes\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistSocHiRes\",\n                    type: \"number\",\n                    role: \"value.battery\",\n                    read: true,\n                    write: false,\n                    unit: \"%\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistShuntVolt\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistShuntVolt\",\n                    type: \"number\",\n                    role: \"value.voltage\",\n                    read: true,\n                    write: false,\n                    unit: \"V\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistShuntAmp\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistShuntAmp\",\n                    type: \"number\",\n                    role: \"value.current\",\n                    read: true,\n                    write: false,\n                    unit: \"A\",\n                },\n                native: {},\n            }),\n            this.adapter.setObjectNotExistsAsync(this.getVariableName(systemId, \"QuickSessionHistNumOfCellsInBypass\"), {\n                type: \"state\",\n                common: {\n                    name: \"QuickSessionHistNumOfCellsInBypass\",\n                    type: \"number\",\n                    role: \"value\",\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            }),\n        ]);\n    }\n\n    public handleMessage(systemId: number, msg: Buffer): void {\n        if (!this.adapter.config[\"6831_active\"] || this.ratelimitTimeout) {\n            return;\n        }\n        this.ratelimitTimeout = this.adapter.setTimeout(() => {\n            this.ratelimitTimeout = undefined;\n        }, this.adapter.config[\"6831_ratelimit\"]);\n        const result: Message_6831_QuickSessionHist = this.parser.parse(msg);\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistId\"),\n            result.QuickSessionHistId,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistTime\"),\n            result.QuickSessionHistTime,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistSystemOpState\"),\n            result.QuickSessionHistSystemOpState,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistControlLogic\"),\n            result.QuickSessionHistControlLogic,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistMinCellVolt\"),\n            result.QuickSessionHistMinCellVolt,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistMaxCellVolt\"),\n            result.QuickSessionHistMaxCellVolt,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistAvgCellVolt\"),\n            result.QuickSessionHistAvgCellVolt,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistAvgCellTemp\"),\n            result.QuickSessionHistAvgCellTemp,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistSocHiRes\"),\n            result.QuickSessionHistSocHiRes,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistShuntVolt\"),\n            result.QuickSessionHistShuntVolt,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistShuntAmp\"),\n            result.QuickSessionHistShuntAmp,\n            true,\n        );\n        void this.adapter.setStateChangedAsync(\n            this.getVariableName(systemId, \"QuickSessionHistNumOfCellsInBypass\"),\n            result.QuickSessionHistNumOfCellsInBypass,\n            true,\n        );\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,2BAAuB;AACvB,2BAA6B;AAkBtB,MAAM,qCAAqC,kCAAwC;AAAA,EAC9E;AAAA,EAED,YAAY,SAAgC;AAC/C,UAAM,OAAO;AASb,SAAK,UAAU;AACf,SAAK,YAAY;AACjB,SAAK,cAAc;AACnB,SAAK,SAAS,IAAI,4BAAO,EACpB,KAAK,CAAC,EACN,QAAQ,oBAAoB,EAC5B,SAAS,sBAAsB,EAC/B,MAAM,+BAA+B,EAarC,MAAM,8BAA8B,EACpC,QAAQ,+BAA+B;AAAA,MACpC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,QAAQ,+BAA+B;AAAA,MACpC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,QAAQ,+BAA+B;AAAA,MACpC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,MAAM,+BAA+B;AAAA,MAClC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,QAAQ,4BAA4B;AAAA,MACjC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,QAAQ,6BAA6B;AAAA,MAClC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,QAAQ,4BAA4B;AAAA,MACjC,WAAW,OAAK;AACZ,eAAO,IAAI;AAAA,MACf;AAAA,IACJ,CAAC,EACA,MAAM,oCAAoC;AAAA,EACnD;AAAA,EAEA,MAAa,YAAY,UAAiC;AACtD,UAAM,QAAQ,IAAI;AAAA,MACd,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,oBAAoB,GAAG;AAAA,QACvF,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACX;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,sBAAsB,GAAG;AAAA,QACzF,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACX;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,+BAA+B,GAAG;AAAA,QAClG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,QAAQ;AAAA,YACJ,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,YACH,IAAI;AAAA,YACJ,IAAI;AAAA,UACR;AAAA,QACJ;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,8BAA8B,GAAG;AAAA,QACjG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACX;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,6BAA6B,GAAG;AAAA,QAChG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,6BAA6B,GAAG;AAAA,QAChG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,6BAA6B,GAAG;AAAA,QAChG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,6BAA6B,GAAG;AAAA,QAChG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,0BAA0B,GAAG;AAAA,QAC7F,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,2BAA2B,GAAG;AAAA,QAC9F,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,0BAA0B,GAAG;AAAA,QAC7F,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,MACD,KAAK,QAAQ,wBAAwB,KAAK,gBAAgB,UAAU,oCAAoC,GAAG;AAAA,QACvG,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACX;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,IACL,CAAC;AAAA,EACL;AAAA,EAEO,cAAc,UAAkB,KAAmB;AACtD,QAAI,CAAC,KAAK,QAAQ,OAAO,aAAa,KAAK,KAAK,kBAAkB;AAC9D;AAAA,IACJ;AACA,SAAK,mBAAmB,KAAK,QAAQ,WAAW,MAAM;AAClD,WAAK,mBAAmB;AAAA,IAC5B,GAAG,KAAK,QAAQ,OAAO,gBAAgB,CAAC;AACxC,UAAM,SAAwC,KAAK,OAAO,MAAM,GAAG;AACnE,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,oBAAoB;AAAA,MACnD,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,sBAAsB;AAAA,MACrD,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,+BAA+B;AAAA,MAC9D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,8BAA8B;AAAA,MAC7D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,6BAA6B;AAAA,MAC5D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,6BAA6B;AAAA,MAC5D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,6BAA6B;AAAA,MAC5D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,6BAA6B;AAAA,MAC5D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,0BAA0B;AAAA,MACzD,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,2BAA2B;AAAA,MAC1D,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,0BAA0B;AAAA,MACzD,OAAO;AAAA,MACP;AAAA,IACJ;AACA,SAAK,KAAK,QAAQ;AAAA,MACd,KAAK,gBAAgB,UAAU,oCAAoC;AAAA,MACnE,OAAO;AAAA,MACP;AAAA,IACJ;AAAA,EACJ;AACJ;",
  "names": []
}
